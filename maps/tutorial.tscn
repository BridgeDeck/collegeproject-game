[gd_scene load_steps=12 format=3 uid="uid://cndtksx034aae"]

[ext_resource type="PackedScene" uid="uid://bq8r8yk47xi2m" path="res://maps/base_map.tscn" id="1_q213a"]
[ext_resource type="Texture2D" uid="uid://b8tnb45m12xci" path="res://maps/tutorial_skybox.jpg" id="2_fwf7s"]
[ext_resource type="PackedScene" uid="uid://cwuightqiopbw" path="res://props/lights/visual_spotlight.tscn" id="3_x7mfr"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_x7mfr"]
panorama = ExtResource("2_fwf7s")

[sub_resource type="Sky" id="Sky_2337y"]
sky_material = SubResource("PanoramaSkyMaterial_x7mfr")

[sub_resource type="Environment" id="Environment_50mgq"]
background_mode = 2
background_color = Color(0, 1, 1, 1)
sky = SubResource("Sky_2337y")
ambient_light_source = 1
reflected_light_source = 1
glow_enabled = true
glow_intensity = 0.5
glow_bloom = 0.5
glow_hdr_luminance_cap = 4.0
fog_enabled = true
fog_mode = 1
fog_light_color = Color(0, 0, 0, 1)
fog_light_energy = 6.06
fog_density = 1.0
fog_sky_affect = 0.0
fog_depth_curve = 0.707107
fog_depth_begin = 5.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fwf7s"]
cull_mode = 2
albedo_color = Color(0.162066, 0.162066, 0.162066, 1)
metallic_specular = 0.1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_50mgq"]
albedo_color = Color(0.407056, 0.407056, 0.407056, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_x7mfr"]
albedo_color = Color(1, 1, 0, 1)
metallic = 0.25
metallic_specular = 0.51
emission_enabled = true
emission = Color(0.787461, 1, 0.266925, 1)

[sub_resource type="ViewportTexture" id="ViewportTexture_x7mfr"]
viewport_path = NodePath("InstructJump/SubViewport")

[sub_resource type="ViewportTexture" id="ViewportTexture_2337y"]
viewport_path = NodePath("InstructCrouch/SubViewport")

[node name="BaseMap" instance=ExtResource("1_q213a")]

[node name="DirectionalLight3D" parent="." index="0"]
shadow_enabled = false

[node name="WorldEnvironment" parent="." index="1"]
environment = SubResource("Environment_50mgq")

[node name="BaseMapGeometry" parent="." index="2"]
visible = false
use_collision = false

[node name="MainCharacterEntity" parent="." index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.45297, 1.83314, -0.162)
floor_constant_speed = true
jump_force = 20.0
acceleration = 128.0
air_speed_modifier = 0.5

[node name="MapBoundaries" type="CSGCylinder3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.475586, 0)
gi_mode = 0
use_collision = true
collision_mask = 0
radius = 64.4897
height = 1.04883
smooth_faces = false
material = SubResource("StandardMaterial3D_fwf7s")

[node name="Wall1" type="CSGBox3D" parent="MapBoundaries" index="0"]
transform = Transform3D(0.923879, 0, 0.382683, 0, 1, 0, -0.382683, 0, 0.923879, -55.1785, 74.4999, 22.729)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 50.5192)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall2" type="CSGBox3D" parent="MapBoundaries" index="1"]
transform = Transform3D(0.923879, 0, 0.382683, 0, 1, 0, -0.382683, 0, 0.923879, 55.5489, 74.4999, -23.3658)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 50.0221)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall3" type="CSGBox3D" parent="MapBoundaries" index="2"]
transform = Transform3D(0.923879, 0, -0.382683, 0, 1, 0, 0.382683, 0, 0.923879, 55.083, 74.4999, 23.225)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 52.2429)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall4" type="CSGBox3D" parent="MapBoundaries" index="3"]
transform = Transform3D(-0.923879, 0, 0.382683, 0, 1, 0, -0.382683, 0, -0.923879, -55.4548, 74.4999, -22.8038)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 51.5136)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall5" type="CSGBox3D" parent="MapBoundaries" index="4"]
transform = Transform3D(0.382683, 0, 0.923879, 0, 1, 0, -0.923879, 0, 0.382683, 22.7654, 74.4999, -55)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 51.1783)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall6" type="CSGBox3D" parent="MapBoundaries" index="5"]
transform = Transform3D(-0.382683, 0, -0.923879, 0, 1, 0, 0.923879, 0, -0.382683, -23.8008, 74.4999, 54.4083)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 51.7224)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall7" type="CSGBox3D" parent="MapBoundaries" index="6"]
transform = Transform3D(0.382683, 0, -0.923879, 0, 1, 0, 0.923879, 0, 0.382683, -23.2858, 74.4999, -55.5381)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 52.4914)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Wall8" type="CSGBox3D" parent="MapBoundaries" index="7"]
transform = Transform3D(0.382683, 0, -0.923879, 0, 1, 0, 0.923879, 0, 0.382683, 22.3858, 74.4999, 55.1337)
cast_shadow = 0
gi_mode = 0
size = Vector3(1, 150, 50.8055)
material = SubResource("StandardMaterial3D_50mgq")

[node name="Ceiling" type="CSGCylinder3D" parent="MapBoundaries" index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 148.524, 0)
cast_shadow = 0
gi_mode = 0
use_collision = true
radius = 64.4897
height = 1.04883

[node name="SpotLight3D" parent="." index="6" instance=ExtResource("3_x7mfr")]
transform = Transform3D(1, 0, 0, 0, 0.793353, 0.608761, 0, -0.608761, 0.793353, -3, 35.6616, 48.436)
shadow_enabled = true
shadow_bias = 10.0
shadow_normal_bias = 8.395
shadow_caster_mask = 4294967293
spot_range = 107.0
spot_angle = 17.274

[node name="MapLantern" type="CSGCylinder3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 80.5, 0)
cast_shadow = 0
radius = 3.0
height = 11.0
material = SubResource("StandardMaterial3D_x7mfr")

[node name="OmniLight3D" type="OmniLight3D" parent="MapLantern" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
light_energy = 10.64
omni_range = 207.938
omni_attenuation = 0.76

[node name="WallTutorial" type="CSGBox3D" parent="." index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.5, 3.5, 4)
use_collision = true
collision_mask = 0
size = Vector3(22, 8, 1)

[node name="InstructJump" type="Sprite3D" parent="." index="9"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 3, 0)
billboard = 1
texture = SubResource("ViewportTexture_x7mfr")

[node name="SubViewport" type="SubViewport" parent="InstructJump" index="0"]
transparent_bg = true
size = Vector2i(317, 44)

[node name="Label" type="Label" parent="InstructJump/SubViewport" index="0"]
offset_right = 40.0
offset_bottom = 23.0
theme_override_colors/font_color = Color(0, 1, 0, 1)
theme_override_font_sizes/font_size = 32
text = "Press SPACE to Jump"

[node name="CrouchTutorial" type="CSGBox3D" parent="." index="10"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.5, 6, 13)
use_collision = true
collision_mask = 0
size = Vector3(22, 9, 1)

[node name="InstructCrouch" type="Sprite3D" parent="." index="11"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 5, 8)
billboard = 1
texture = SubResource("ViewportTexture_2337y")

[node name="SubViewport" type="SubViewport" parent="InstructCrouch" index="0"]
transparent_bg = true
size = Vector2i(332, 44)

[node name="Label" type="Label" parent="InstructCrouch/SubViewport" index="0"]
offset_right = 40.0
offset_bottom = 23.0
theme_override_colors/font_color = Color(0, 1, 0, 1)
theme_override_font_sizes/font_size = 32
text = "Press CTRL to Crouch"

[node name="Ramp" type="CSGBox3D" parent="." index="12"]
transform = Transform3D(0.759635, 0.65035, 0, -0.65035, 0.759635, 0, 0, 0, 1, -15.1249, 4.15769, 16.127)
use_collision = true
size = Vector3(14, 1, 6.74609)

[node name="VisualSpotlight" parent="." index="13" instance=ExtResource("3_x7mfr")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -60.1018, 27.5398, -17.3768)
spot_range = 159.193
spot_angle = 21.9095
